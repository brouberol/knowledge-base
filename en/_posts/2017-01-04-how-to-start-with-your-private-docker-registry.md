---
layout: post
title:  "How to start with your private Docker registry?"
categories: docker
author: devatoria
lang: en
---

# Introduction

Docker Registry is a system that lets you store and distribute your Docker images. The mainly known Docker Registry is the official Docker Hub, where you can find official public images such as Alpine, Golang or Debian.

Today, OVH allows you to use its own authenticated Docker Registry where you can **privately** store your Docker images. This is the best way to use your private images with our [Docker with Mesos/Marathon offer](https://www.runabove.com/docker-with-mesos-marathon.xml) without exposing them to everyone.

# Quickstart

```
docker login registry.containers.ovh.net
Username: myusername
Password:

docker pull nginx
docker tag nginx registry.containers.ovh.net/mynamespace/nginx
docker push registry.containers.ovh.net/mynamespace/nginx
```

## Create a registry account

First, you can create a new registry account on our [lab page](http://localhost). The beta is totally free. Once you done this, you can retrieve your registry accounts from the OVH Sunrise Manager.

![Accounts listing](/kb/images/2017-01-04-how-to-start-with-your-private-docker-registry/accounts_listing.png)

## Create an user

A registry account can have multiple users. These users are used to manage rights on namespaces and images (will be explained further). From the users tab, you can create an user.


![User creation](/kb/images/2017-01-04-how-to-start-with-your-private-docker-registry/user_creation.png)

Be careful, the description of the user **IS NOT** its username. The username and the password will be randomly generated by our system. The description is only useful to easily retrieve an user from other tabs.

![User listing](/kb/images/2017-01-04-how-to-start-with-your-private-docker-registry/user_listing.png)

## Create a namespace

Before pushing an image, you need to create a new namespace from the manager. To understand what a namespace is, here's how is architectured a Docker Registry:

```
registry_url/namespace/image:tag
```

* The regitry URL, if not specified, is the official Docker Hub. Otherwise, it helps Docker to find the registry you want to contact.
* **The namespace is like a folder where you will put multiple images**
* The image is the name of your image
* The tag is like a version of your image (by default, latest) and allows you to easily deploy a precise version of an image

Namespaces can be created from the **Namespaces/Images** tab. You only have to provide a name which will be used further to push and pull images.

![Namespace creation](/kb/images/2017-01-04-how-to-start-with-your-private-docker-registry/namespace_creation.png)

## Add some permissions to your namespace

Once your namespace is created, you can select it from the dropdown list and see some details about it, like images it contains and manage permissions.

![Namespace details](/kb/images/2017-01-04-how-to-start-with-your-private-docker-registry/namespace_details.png)

Just add the previously created user as admin (for example) and this user will be able to pull/push on the entire namespace.

![User permissions add](/kb/images/2017-01-04-how-to-start-with-your-private-docker-registry/user_permissions_add.png)

## Login into our registry

Now, you can login (authenticate) to our registry. It will generate a token used each time you will communicate with the registry and with our authentication system, so we will be able to retrieve the rights you have!

```
docker login registry.containers.ovh.net
Username: wsbq5k5ysqyt
Password:
Login Succeed
```

## Push your first image

Finally, you are able to push your first image into our registry! For this, you need to `tag` the image you want. Let's say that you want to push official nginx image in our registry:

```
docker pull nginx # Pull official nginx image from Docker Hub
docker tag nginx registry.containers.ovh.net/devatoria/nginx # Rename image and add registry information
docker push registry.containers.ovh.net/devatoria/nginx # Push it!
```

And, that's all!

After a few minutes (waiting for synchronization), you will be able to see your namespace images, tags and details. You can also manage permissions directly on images.

![Images listing](/kb/images/2017-01-04-how-to-start-with-your-private-docker-registry/images_listing.png)

# What's next?

You can know check [how to use a private registry with our Docker on Mesos/Marathon offer](https://community.runabove.com/kb/en/docker/using-a-private-registry.html)!
